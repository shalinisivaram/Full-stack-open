(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),c=n(16),a=n.n(c),u=(n(7),n(6)),i=n(3),s=(n(21),n(0)),l=function(e){var t=e.person,n=e.deleteContact;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("h3",{children:[" ",t.name,":",t.number]}),Object(s.jsx)("button",{onClick:function(){return n(t.id)},children:"Delete"}),"    "]})},d=function(e){var t=e.setSearch;return Object(s.jsxs)("div",{children:["Filter shown with: ",Object(s.jsx)("input",{onChange:function(e){var n=e.target;return t(n.value)}})]})},b=function(e){var t=e.onSubmit,n=e.newName,r=e.addNewName,o=e.newNumber,c=e.addNewNumber;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsx)("h2",{children:"Add Contact"}),"Name:",Object(s.jsx)("input",{value:n,onChange:r})," ",Object(s.jsx)("br",{})," ",Object(s.jsx)("br",{}),"Number:",Object(s.jsx)("input",{value:o,onChange:c}),Object(s.jsx)("button",{type:"submit",children:"Save"})]})},j=n(4),f=n.n(j),m="/api/persons",h={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return f.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))}},O=function(e){var t=e.message;e.error;return null===t?null:Object(s.jsx)("div",{style:{color:"green",backgroundColor:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5},children:t})},v=function(e){var t=e.error;return null===t?null:Object(s.jsx)("div",{style:{color:"red",backgroundColor:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5},children:t})},g=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),a=Object(i.a)(c,2),j=a[0],f=a[1],m=Object(r.useState)(""),g=Object(i.a)(m,2),p=g[0],x=g[1],w=Object(r.useState)(""),S=Object(i.a)(w,2),N=S[0],C=S[1],y=Object(r.useState)(null),k=Object(i.a)(y,2),F=k[0],T=k[1],A=Object(r.useState)(null),L=Object(i.a)(A,2),D=L[0],I=L[1];Object(r.useEffect)((function(){h.getAll().then((function(e){o(e)}))}),[]);var P=""===N?n:n.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})),z=function(e){var t=n.filter((function(t){return t.id===e}))[0].name;window.confirm("Are you sure want to delete contact ".concat(t))&&(h.remove(e),console.log("".concat(e," is deleted")),o(n.filter((function(t){return t.id!==e}))))};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Phonebook"}),Object(s.jsx)(d,{setSearch:C}),Object(s.jsx)(b,{onSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===j}));if(t){if(window.confirm("".concat(j," is already added to phonebook,do you want to replace old number with new number"))){var r=Object(u.a)(Object(u.a)({},t),{},{number:p}),c=t.id;h.update(c,r).then((function(e){o(n.map((function(t){return t.id!==c?t:e}))),f(""),x(""),T("".concat(e.name," number is updated")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){o(n.filter((function(e){return e.name!==t.name}))),I("Information of ".concat(t.name," is already removed from the server")),setTimeout((function(){return I(null)}),5e3)}))}}else{var a={name:j,number:p};h.create(a).then((function(e){o(n.concat(e)),f(""),x(""),T("".concat(e.name," is added to phonebook")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){console.log(e.response.data),T(e.response.data.error)}))}},newName:j,addNewName:function(e){console.log(e.target.value),f(e.target.value)},newNumber:p,addNewNumber:function(e){console.log(e.target.value),x(e.target.value)}}),Object(s.jsx)(O,{message:F}),Object(s.jsx)(v,{error:D}),Object(s.jsx)("h2",{children:" Numbers "}),P.map((function(e){return Object(s.jsx)(l,{person:e,deleteContact:z},e.name)}))]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),c(e),a(e)}))};a.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(g,{})}),document.getElementById("root")),p()},7:function(e,t,n){}},[[41,1,2]]]);
//# sourceMappingURL=main.cb9770b5.chunk.js.map